{"ast":null,"code":"import React from 'react';\nimport * as actionType from './actionTypes';\nimport axios from 'axios';\nexport const authStart = () => {\n  return {\n    types: actionType.AUTH_START\n  };\n};\nexport const authSucess = (username, token) => {\n  return {\n    type: actionType.AUTH_SUCESS,\n    username: username,\n    token: token\n  };\n};\nexport const authFail = error => {\n  return {\n    type: actionType.AUTH_FAIL,\n    error: error\n  };\n};\nexport const authLogout = () => {\n  localStorage.removeItem('username');\n  localStorage.removeItem('token');\n  localStorage.removeItem('expirationDate');\n  return {\n    type: actionType.AUTH_LOGOUT\n  };\n};\nexport const checkTimeout = expirationDate => {\n  return dispatch => {\n    setTimeout(() => {\n      dispatch(authLogout);\n    }, expirationDate * 1000);\n  };\n};\nexport const authLogin = (username, password) => {\n  return dispatch => {\n    dispatch(authStart());\n    axios.post('https//:127.0.0.1:8000', {\n      username: username,\n      password: password\n    }).then(res => {\n      const token = res.data.token;\n      const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n      localStorage.setItem('username', username);\n      localStorage.setItem('token', token);\n      localStorage.setItem('expirationDate', expirationDate);\n      dispatch(authSucess(username, token));\n      dispatch(checkTimeout(3600));\n    }).catch(err => {\n      dispatch(authFail(err));\n    });\n  };\n};\nexport const authSignup = (username, email, password1, password2) => {\n  return dispatch => {\n    dispatch(authStart());\n    axios.post('https//:127.0.0.1:8000', {\n      username: username,\n      email: email,\n      password1: password1,\n      password2: password2\n    }).then(res => {\n      const token = res.data.token;\n      const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n      localStorage.setItem('username', username);\n      localStorage.setItem('token', token);\n      localStorage.setItem('expirationDate', expirationDate);\n      dispatch(authSucess(username, token));\n      dispatch(checkTimeout(3600));\n    }).catch(err => {\n      dispatch(authFail(err));\n    });\n  };\n};\nexport const checkState = () => {\n  return dispatch => {\n    const username = localStorage.getItem('username');\n    const token = localStorage.getItem('token');\n\n    if (token === undefined) {\n      dispatch(authLogout());\n    } else {\n      const expirationDate = new Date(localStorage.getItem('expirationDate'));\n\n      if (expirationDate <= new Date()) {\n        dispatch(authLogout());\n      } else {\n        dispatch(authSucess(username, token));\n        dispatch(checkTimeout((expirationDate.getTime() - new Date().getTime()) / 1000));\n      }\n    }\n  };\n};","map":{"version":3,"sources":["/home/saif/Desktop/projects/djreact/frontend/gui/src/store/action/auth.js"],"names":["React","actionType","axios","authStart","types","AUTH_START","authSucess","username","token","type","AUTH_SUCESS","authFail","error","AUTH_FAIL","authLogout","localStorage","removeItem","AUTH_LOGOUT","checkTimeout","expirationDate","dispatch","setTimeout","authLogin","password","post","then","res","data","Date","getTime","setItem","catch","err","authSignup","email","password1","password2","checkState","getItem","undefined"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as actionType from './actionTypes'\nimport axios from 'axios'\n\n\nexport const authStart = () => {\n    return {\n        types: actionType.AUTH_START,\n        \n    }\n}\n\nexport const authSucess = (username, token) => {\n    return {\n        type: actionType.AUTH_SUCESS,\n        username: username,\n        token : token,\n\n    }\n}\n\nexport const authFail = (error) => {\n    return {\n        type: actionType.AUTH_FAIL,\n        error: error\n    }\n}\n\nexport const authLogout = () => {\n\n    localStorage.removeItem('username');\n    localStorage.removeItem('token');\n    localStorage.removeItem('expirationDate')\n\n    return {\n        type : actionType.AUTH_LOGOUT\n    }\n}\n\nexport const checkTimeout = expirationDate => {\n    return dispatch => {\n        setTimeout( () => {\n            dispatch(authLogout)\n        }, expirationDate * 1000)\n    }\n}\n\nexport const authLogin = (username, password) => {\n    return dispatch => {\n        dispatch(authStart());\n        axios.post('https//:127.0.0.1:8000', {\n            username: username,\n            password: password\n\n        })\n        .then(res => {\n            const token = res.data.token\n            const expirationDate = new Date(new Date().getTime() + 3600 * 1000)\n            localStorage.setItem('username', username)\n            localStorage.setItem('token', token)\n            localStorage.setItem('expirationDate', expirationDate)\n            dispatch(authSucess(username, token))\n            dispatch(checkTimeout(3600))\n        })\n        .catch(err => {\n            dispatch(authFail(err))\n        })\n\n    }\n}\n\n\nexport const authSignup = (username, email, password1, password2) => {\n    return dispatch => {\n        dispatch(authStart());\n        axios.post('https//:127.0.0.1:8000', {\n            username: username,\n            email : email,\n            password1: password1,\n            password2: password2\n\n        })\n        .then(res => {\n            const token = res.data.token;\n            const expirationDate = new Date(new Date().getTime() + 3600 * 1000)\n            localStorage.setItem('username', username)\n            localStorage.setItem('token', token)\n            localStorage.setItem('expirationDate', expirationDate)\n            dispatch(authSucess(username, token))\n            dispatch(checkTimeout(3600))\n        })\n        .catch(err => {\n            dispatch(authFail(err))\n        })\n\n    }\n}\n\n\nexport const checkState = () => {\n    return dispatch => {\n        const username = localStorage.getItem('username');\n        const token = localStorage.getItem('token');\n\n        if (token === undefined) {\n            dispatch(authLogout())\n\n        } else {\n            const expirationDate = new Date(localStorage.getItem('expirationDate'))\n            if (expirationDate <= new Date()) {\n                dispatch(authLogout())\n            } else {\n                dispatch(authSucess(username, token))\n                dispatch(checkTimeout( (expirationDate.getTime() - new Date().getTime()) / 1000) );\n            }\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}